(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();const O=11102230246251565e-32,U=134217729,ut=(3+8*O)*O;function Z(h,t,e,i,n){let s,l,r,o,f=t[0],d=i[0],c=0,u=0;d>f==d>-f?(s=f,f=t[++c]):(s=d,d=i[++u]);let a=0;if(c<h&&u<e)for(d>f==d>-f?(l=f+s,r=s-(l-f),f=t[++c]):(l=d+s,r=s-(l-d),d=i[++u]),s=l,r!==0&&(n[a++]=r);c<h&&u<e;)d>f==d>-f?(l=s+f,o=l-s,r=s-(l-o)+(f-o),f=t[++c]):(l=s+d,o=l-s,r=s-(l-o)+(d-o),d=i[++u]),s=l,r!==0&&(n[a++]=r);for(;c<h;)l=s+f,o=l-s,r=s-(l-o)+(f-o),f=t[++c],s=l,r!==0&&(n[a++]=r);for(;u<e;)l=s+d,o=l-s,r=s-(l-o)+(d-o),d=i[++u],s=l,r!==0&&(n[a++]=r);return(s!==0||a===0)&&(n[a++]=s),a}function ft(h,t){let e=t[0];for(let i=1;i<h;i++)e+=t[i];return e}function G(h){return new Float64Array(h)}const dt=(3+16*O)*O,gt=(2+12*O)*O,_t=(9+64*O)*O*O,X=G(4),nt=G(8),it=G(12),st=G(16),D=G(4);function mt(h,t,e,i,n,s,l){let r,o,f,d,c,u,a,g,_,p,y,b,A,k,M,S,P,I;const m=h-n,x=e-n,w=t-s,T=i-s;k=m*T,u=U*m,a=u-(u-m),g=m-a,u=U*T,_=u-(u-T),p=T-_,M=g*p-(k-a*_-g*_-a*p),S=w*x,u=U*w,a=u-(u-w),g=w-a,u=U*x,_=u-(u-x),p=x-_,P=g*p-(S-a*_-g*_-a*p),y=M-P,c=M-y,X[0]=M-(y+c)+(c-P),b=k+y,c=b-k,A=k-(b-c)+(y-c),y=A-S,c=A-y,X[1]=A-(y+c)+(c-S),I=b+y,c=I-b,X[2]=b-(I-c)+(y-c),X[3]=I;let j=ft(4,X),L=gt*l;if(j>=L||-j>=L||(c=h-m,r=h-(m+c)+(c-n),c=e-x,f=e-(x+c)+(c-n),c=t-w,o=t-(w+c)+(c-s),c=i-T,d=i-(T+c)+(c-s),r===0&&o===0&&f===0&&d===0)||(L=_t*l+ut*Math.abs(j),j+=m*d+T*r-(w*f+x*o),j>=L||-j>=L))return j;k=r*T,u=U*r,a=u-(u-r),g=r-a,u=U*T,_=u-(u-T),p=T-_,M=g*p-(k-a*_-g*_-a*p),S=o*x,u=U*o,a=u-(u-o),g=o-a,u=U*x,_=u-(u-x),p=x-_,P=g*p-(S-a*_-g*_-a*p),y=M-P,c=M-y,D[0]=M-(y+c)+(c-P),b=k+y,c=b-k,A=k-(b-c)+(y-c),y=A-S,c=A-y,D[1]=A-(y+c)+(c-S),I=b+y,c=I-b,D[2]=b-(I-c)+(y-c),D[3]=I;const F=Z(4,X,4,D,nt);k=m*d,u=U*m,a=u-(u-m),g=m-a,u=U*d,_=u-(u-d),p=d-_,M=g*p-(k-a*_-g*_-a*p),S=w*f,u=U*w,a=u-(u-w),g=w-a,u=U*f,_=u-(u-f),p=f-_,P=g*p-(S-a*_-g*_-a*p),y=M-P,c=M-y,D[0]=M-(y+c)+(c-P),b=k+y,c=b-k,A=k-(b-c)+(y-c),y=A-S,c=A-y,D[1]=A-(y+c)+(c-S),I=b+y,c=I-b,D[2]=b-(I-c)+(y-c),D[3]=I;const v=Z(F,nt,4,D,it);k=r*d,u=U*r,a=u-(u-r),g=r-a,u=U*d,_=u-(u-d),p=d-_,M=g*p-(k-a*_-g*_-a*p),S=o*f,u=U*o,a=u-(u-o),g=o-a,u=U*f,_=u-(u-f),p=f-_,P=g*p-(S-a*_-g*_-a*p),y=M-P,c=M-y,D[0]=M-(y+c)+(c-P),b=k+y,c=b-k,A=k-(b-c)+(y-c),y=A-S,c=A-y,D[1]=A-(y+c)+(c-S),I=b+y,c=I-b,D[2]=b-(I-c)+(y-c),D[3]=I;const E=Z(v,it,4,D,st);return st[E-1]}function R(h,t,e,i,n,s){const l=(t-s)*(e-n),r=(h-n)*(i-s),o=l-r,f=Math.abs(l+r);return Math.abs(o)>=dt*f?o:-mt(h,t,e,i,n,s,f)}const lt=Math.pow(2,-52),V=new Uint32Array(512);class Q{static from(t,e=xt,i=vt){const n=t.length,s=new Float64Array(n*2);for(let l=0;l<n;l++){const r=t[l];s[2*l]=e(r),s[2*l+1]=i(r)}return new Q(s)}constructor(t){const e=t.length>>1;if(e>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:i,_hullTri:n,_hullHash:s}=this,l=t.length>>1;let r=1/0,o=1/0,f=-1/0,d=-1/0;for(let m=0;m<l;m++){const x=t[2*m],w=t[2*m+1];x<r&&(r=x),w<o&&(o=w),x>f&&(f=x),w>d&&(d=w),this._ids[m]=m}const c=(r+f)/2,u=(o+d)/2;let a,g,_;for(let m=0,x=1/0;m<l;m++){const w=$(c,u,t[2*m],t[2*m+1]);w<x&&(a=m,x=w)}const p=t[2*a],y=t[2*a+1];for(let m=0,x=1/0;m<l;m++){if(m===a)continue;const w=$(p,y,t[2*m],t[2*m+1]);w<x&&w>0&&(g=m,x=w)}let b=t[2*g],A=t[2*g+1],k=1/0;for(let m=0;m<l;m++){if(m===a||m===g)continue;const x=bt(p,y,b,A,t[2*m],t[2*m+1]);x<k&&(_=m,k=x)}let M=t[2*_],S=t[2*_+1];if(k===1/0){for(let w=0;w<l;w++)this._dists[w]=t[2*w]-t[0]||t[2*w+1]-t[1];q(this._ids,this._dists,0,l-1);const m=new Uint32Array(l);let x=0;for(let w=0,T=-1/0;w<l;w++){const j=this._ids[w],L=this._dists[j];L>T&&(m[x++]=j,T=L)}this.hull=m.subarray(0,x),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(R(p,y,b,A,M,S)<0){const m=g,x=b,w=A;g=_,b=M,A=S,_=m,M=x,S=w}const P=wt(p,y,b,A,M,S);this._cx=P.x,this._cy=P.y;for(let m=0;m<l;m++)this._dists[m]=$(t[2*m],t[2*m+1],P.x,P.y);q(this._ids,this._dists,0,l-1),this._hullStart=a;let I=3;i[a]=e[_]=g,i[g]=e[a]=_,i[_]=e[g]=a,n[a]=0,n[g]=1,n[_]=2,s.fill(-1),s[this._hashKey(p,y)]=a,s[this._hashKey(b,A)]=g,s[this._hashKey(M,S)]=_,this.trianglesLen=0,this._addTriangle(a,g,_,-1,-1,-1);for(let m=0,x,w;m<this._ids.length;m++){const T=this._ids[m],j=t[2*T],L=t[2*T+1];if(m>0&&Math.abs(j-x)<=lt&&Math.abs(L-w)<=lt||(x=j,w=L,T===a||T===g||T===_))continue;let F=0;for(let N=0,at=this._hashKey(j,L);N<this._hashSize&&(F=s[(at+N)%this._hashSize],!(F!==-1&&F!==i[F]));N++);F=e[F];let v=F,E;for(;E=i[v],R(j,L,t[2*v],t[2*v+1],t[2*E],t[2*E+1])>=0;)if(v=E,v===F){v=-1;break}if(v===-1)continue;let z=this._addTriangle(v,T,i[v],-1,-1,n[v]);n[T]=this._legalize(z+2),n[v]=z,I++;let C=i[v];for(;E=i[C],R(j,L,t[2*C],t[2*C+1],t[2*E],t[2*E+1])<0;)z=this._addTriangle(C,T,E,n[T],-1,n[C]),n[T]=this._legalize(z+2),i[C]=C,I--,C=E;if(v===F)for(;E=e[v],R(j,L,t[2*E],t[2*E+1],t[2*v],t[2*v+1])<0;)z=this._addTriangle(E,T,v,-1,n[v],n[E]),this._legalize(z+2),n[E]=z,i[v]=v,I--,v=E;this._hullStart=e[T]=v,i[v]=e[C]=T,i[T]=C,s[this._hashKey(j,L)]=T,s[this._hashKey(t[2*v],t[2*v+1])]=v}this.hull=new Uint32Array(I);for(let m=0,x=this._hullStart;m<I;m++)this.hull[m]=x,x=i[x];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(yt(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:i,coords:n}=this;let s=0,l=0;for(;;){const r=i[t],o=t-t%3;if(l=o+(t+2)%3,r===-1){if(s===0)break;t=V[--s];continue}const f=r-r%3,d=o+(t+1)%3,c=f+(r+2)%3,u=e[l],a=e[t],g=e[d],_=e[c];if(pt(n[2*u],n[2*u+1],n[2*a],n[2*a+1],n[2*g],n[2*g+1],n[2*_],n[2*_+1])){e[t]=_,e[r]=u;const y=i[c];if(y===-1){let A=this._hullStart;do{if(this._hullTri[A]===c){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,y),this._link(r,i[l]),this._link(l,c);const b=f+(r+1)%3;s<V.length&&(V[s++]=b)}else{if(s===0)break;t=V[--s]}}return l}_link(t,e){this._halfedges[t]=e,e!==-1&&(this._halfedges[e]=t)}_addTriangle(t,e,i,n,s,l){const r=this.trianglesLen;return this._triangles[r]=t,this._triangles[r+1]=e,this._triangles[r+2]=i,this._link(r,n),this._link(r+1,s),this._link(r+2,l),this.trianglesLen+=3,r}}function yt(h,t){const e=h/(Math.abs(h)+Math.abs(t));return(t>0?3-e:1+e)/4}function $(h,t,e,i){const n=h-e,s=t-i;return n*n+s*s}function pt(h,t,e,i,n,s,l,r){const o=h-l,f=t-r,d=e-l,c=i-r,u=n-l,a=s-r,g=o*o+f*f,_=d*d+c*c,p=u*u+a*a;return o*(c*p-_*a)-f*(d*p-_*u)+g*(d*a-c*u)<0}function bt(h,t,e,i,n,s){const l=e-h,r=i-t,o=n-h,f=s-t,d=l*l+r*r,c=o*o+f*f,u=.5/(l*f-r*o),a=(f*d-r*c)*u,g=(l*c-o*d)*u;return a*a+g*g}function wt(h,t,e,i,n,s){const l=e-h,r=i-t,o=n-h,f=s-t,d=l*l+r*r,c=o*o+f*f,u=.5/(l*f-r*o),a=h+(f*d-r*c)*u,g=t+(l*c-o*d)*u;return{x:a,y:g}}function q(h,t,e,i){if(i-e<=20)for(let n=e+1;n<=i;n++){const s=h[n],l=t[s];let r=n-1;for(;r>=e&&t[h[r]]>l;)h[r+1]=h[r--];h[r+1]=s}else{const n=e+i>>1;let s=e+1,l=i;W(h,n,s),t[h[e]]>t[h[i]]&&W(h,e,i),t[h[s]]>t[h[i]]&&W(h,s,i),t[h[e]]>t[h[s]]&&W(h,e,s);const r=h[s],o=t[r];for(;;){do s++;while(t[h[s]]<o);do l--;while(t[h[l]]>o);if(l<s)break;W(h,s,l)}h[e+1]=h[l],h[l]=r,i-s+1>=l-e?(q(h,t,s,i),q(h,t,e,l-1)):(q(h,t,e,l-1),q(h,t,s,i))}}function W(h,t,e){const i=h[t];h[t]=h[e],h[e]=i}function xt(h){return h[0]}function vt(h){return h[1]}const rt=1e-6;class K{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,i){t=+t,e=+e,i=+i;const n=t+i,s=e;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${n},${s}`:(Math.abs(this._x1-n)>rt||Math.abs(this._y1-s)>rt)&&(this._+="L"+n+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${e}A${i},${i},0,1,1,${this._x1=n},${this._y1=s}`)}rect(t,e,i,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+i}v${+n}h${-i}Z`}value(){return this._||null}}class tt{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class At{constructor(t,[e,i,n,s]=[0,0,960,500]){if(!((n=+n)>=(e=+e))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=n,this.xmin=e,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:i},vectors:n}=this;let s,l;const r=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let _=0,p=0,y=i.length,b,A;_<y;_+=3,p+=2){const k=i[_]*2,M=i[_+1]*2,S=i[_+2]*2,P=t[k],I=t[k+1],m=t[M],x=t[M+1],w=t[S],T=t[S+1],j=m-P,L=x-I,F=w-P,v=T-I,E=(j*v-L*F)*2;if(Math.abs(E)<1e-9){if(s===void 0){s=l=0;for(const C of e)s+=t[C*2],l+=t[C*2+1];s/=e.length,l/=e.length}const z=1e9*Math.sign((s-P)*v-(l-I)*F);b=(P+w)/2-z*v,A=(I+T)/2+z*F}else{const z=1/E,C=j*j+L*L,N=F*F+v*v;b=P+(v*C-L*N)*z,A=I+(j*N-F*C)*z}r[p]=b,r[p+1]=A}let o=e[e.length-1],f,d=o*4,c,u=t[2*o],a,g=t[2*o+1];n.fill(0);for(let _=0;_<e.length;++_)o=e[_],f=d,c=u,a=g,d=o*4,u=t[2*o],g=t[2*o+1],n[f+2]=n[d]=a-g,n[f+3]=n[d+1]=u-c}render(t){const e=t==null?t=new K:void 0,{delaunay:{halfedges:i,inedges:n,hull:s},circumcenters:l,vectors:r}=this;if(s.length<=1)return null;for(let d=0,c=i.length;d<c;++d){const u=i[d];if(u<d)continue;const a=Math.floor(d/3)*2,g=Math.floor(u/3)*2,_=l[a],p=l[a+1],y=l[g],b=l[g+1];this._renderSegment(_,p,y,b,t)}let o,f=s[s.length-1];for(let d=0;d<s.length;++d){o=f,f=s[d];const c=Math.floor(n[f]/3)*2,u=l[c],a=l[c+1],g=o*4,_=this._project(u,a,r[g+2],r[g+3]);_&&this._renderSegment(u,a,_[0],_[1],t)}return e&&e.value()}renderBounds(t){const e=t==null?t=new K:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const i=e==null?e=new K:void 0,n=this._clip(t);if(n===null||!n.length)return;e.moveTo(n[0],n[1]);let s=n.length;for(;n[0]===n[s-2]&&n[1]===n[s-1]&&s>1;)s-=2;for(let l=2;l<s;l+=2)(n[l]!==n[l-2]||n[l+1]!==n[l-1])&&e.lineTo(n[l],n[l+1]);return e.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,i=t.length/2;e<i;++e){const n=this.cellPolygon(e);n&&(n.index=e,yield n)}}cellPolygon(t){const e=new tt;return this.renderCell(t,e),e.value()}_renderSegment(t,e,i,n,s){let l;const r=this._regioncode(t,e),o=this._regioncode(i,n);r===0&&o===0?(s.moveTo(t,e),s.lineTo(i,n)):(l=this._clipSegment(t,e,i,n,r,o))&&(s.moveTo(l[0],l[1]),s.lineTo(l[2],l[3]))}contains(t,e,i){return e=+e,e!==e||(i=+i,i!==i)?!1:this.delaunay._step(t,e,i)===t}*neighbors(t){const e=this._clip(t);if(e)for(const i of this.delaunay.neighbors(t)){const n=this._clip(i);if(n){t:for(let s=0,l=e.length;s<l;s+=2)for(let r=0,o=n.length;r<o;r+=2)if(e[s]===n[r]&&e[s+1]===n[r+1]&&e[(s+2)%l]===n[(r+o-2)%o]&&e[(s+3)%l]===n[(r+o-1)%o]){yield i;break t}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:i,halfedges:n,triangles:s}}=this,l=i[t];if(l===-1)return null;const r=[];let o=l;do{const f=Math.floor(o/3);if(r.push(e[f*2],e[f*2+1]),o=o%3===2?o-2:o+1,s[o]!==t)break;o=n[o]}while(o!==l&&o!==-1);return r}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:i}=this,n=t*4;return this._simplify(i[n]||i[n+1]?this._clipInfinite(t,e,i[n],i[n+1],i[n+2],i[n+3]):this._clipFinite(t,e))}_clipFinite(t,e){const i=e.length;let n=null,s,l,r=e[i-2],o=e[i-1],f,d=this._regioncode(r,o),c,u=0;for(let a=0;a<i;a+=2)if(s=r,l=o,r=e[a],o=e[a+1],f=d,d=this._regioncode(r,o),f===0&&d===0)c=u,u=0,n?n.push(r,o):n=[r,o];else{let g,_,p,y,b;if(f===0){if((g=this._clipSegment(s,l,r,o,f,d))===null)continue;[_,p,y,b]=g}else{if((g=this._clipSegment(r,o,s,l,d,f))===null)continue;[y,b,_,p]=g,c=u,u=this._edgecode(_,p),c&&u&&this._edge(t,c,u,n,n.length),n?n.push(_,p):n=[_,p]}c=u,u=this._edgecode(y,b),c&&u&&this._edge(t,c,u,n,n.length),n?n.push(y,b):n=[y,b]}if(n)c=u,u=this._edgecode(n[0],n[1]),c&&u&&this._edge(t,c,u,n,n.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return n}_clipSegment(t,e,i,n,s,l){const r=s<l;for(r&&([t,e,i,n,s,l]=[i,n,t,e,l,s]);;){if(s===0&&l===0)return r?[i,n,t,e]:[t,e,i,n];if(s&l)return null;let o,f,d=s||l;d&8?(o=t+(i-t)*(this.ymax-e)/(n-e),f=this.ymax):d&4?(o=t+(i-t)*(this.ymin-e)/(n-e),f=this.ymin):d&2?(f=e+(n-e)*(this.xmax-t)/(i-t),o=this.xmax):(f=e+(n-e)*(this.xmin-t)/(i-t),o=this.xmin),s?(t=o,e=f,s=this._regioncode(t,e)):(i=o,n=f,l=this._regioncode(i,n))}}_clipInfinite(t,e,i,n,s,l){let r=Array.from(e),o;if((o=this._project(r[0],r[1],i,n))&&r.unshift(o[0],o[1]),(o=this._project(r[r.length-2],r[r.length-1],s,l))&&r.push(o[0],o[1]),r=this._clipFinite(t,r))for(let f=0,d=r.length,c,u=this._edgecode(r[d-2],r[d-1]);f<d;f+=2)c=u,u=this._edgecode(r[f],r[f+1]),c&&u&&(f=this._edge(t,c,u,r,f),d=r.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(r=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return r}_edge(t,e,i,n,s){for(;e!==i;){let l,r;switch(e){case 5:e=4;continue;case 4:e=6,l=this.xmax,r=this.ymin;break;case 6:e=2;continue;case 2:e=10,l=this.xmax,r=this.ymax;break;case 10:e=8;continue;case 8:e=9,l=this.xmin,r=this.ymax;break;case 9:e=1;continue;case 1:e=5,l=this.xmin,r=this.ymin;break}(n[s]!==l||n[s+1]!==r)&&this.contains(t,l,r)&&(n.splice(s,0,l,r),s+=2)}return s}_project(t,e,i,n){let s=1/0,l,r,o;if(n<0){if(e<=this.ymin)return null;(l=(this.ymin-e)/n)<s&&(o=this.ymin,r=t+(s=l)*i)}else if(n>0){if(e>=this.ymax)return null;(l=(this.ymax-e)/n)<s&&(o=this.ymax,r=t+(s=l)*i)}if(i>0){if(t>=this.xmax)return null;(l=(this.xmax-t)/i)<s&&(r=this.xmax,o=e+(s=l)*n)}else if(i<0){if(t<=this.xmin)return null;(l=(this.xmin-t)/i)<s&&(r=this.xmin,o=e+(s=l)*n)}return[r,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const i=(e+2)%t.length,n=(e+4)%t.length;(t[e]===t[i]&&t[i]===t[n]||t[e+1]===t[i+1]&&t[i+1]===t[n+1])&&(t.splice(i,2),e-=2)}t.length||(t=null)}return t}}const Tt=2*Math.PI,Y=Math.pow;function It(h){return h[0]}function kt(h){return h[1]}function Mt(h){const{triangles:t,coords:e}=h;for(let i=0;i<t.length;i+=3){const n=2*t[i],s=2*t[i+1],l=2*t[i+2];if((e[l]-e[n])*(e[s+1]-e[n+1])-(e[s]-e[n])*(e[l+1]-e[n+1])>1e-10)return!1}return!0}function St(h,t,e){return[h+Math.sin(h+t)*e,t+Math.cos(h-t)*e]}class et{static from(t,e=It,i=kt,n){return new et("length"in t?jt(t,e,i,n):Float64Array.from(Pt(t,e,i,n)))}constructor(t){this._delaunator=new Q(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&Mt(t)){this.collinear=Int32Array.from({length:e.length/2},(u,a)=>a).sort((u,a)=>e[2*u]-e[2*a]||e[2*u+1]-e[2*a+1]);const o=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[e[2*o],e[2*o+1],e[2*f],e[2*f+1]],c=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let u=0,a=e.length/2;u<a;++u){const g=St(e[2*u],e[2*u+1],c);e[2*u]=g[0],e[2*u+1]=g[1]}this._delaunator=new Q(e)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,n=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),r=this._hullIndex.fill(-1);for(let o=0,f=i.length;o<f;++o){const d=s[o%3===2?o-2:o+1];(i[o]===-1||l[d]===-1)&&(l[d]=o)}for(let o=0,f=n.length;o<f;++o)r[n[o]]=o;n.length<=2&&n.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=n[0],l[n[0]]=1,n.length===2&&(l[n[1]]=0,this.triangles[1]=n[1],this.triangles[2]=n[1]))}voronoi(t){return new At(this,t)}*neighbors(t){const{inedges:e,hull:i,_hullIndex:n,halfedges:s,triangles:l,collinear:r}=this;if(r){const c=r.indexOf(t);c>0&&(yield r[c-1]),c<r.length-1&&(yield r[c+1]);return}const o=e[t];if(o===-1)return;let f=o,d=-1;do{if(yield d=l[f],f=f%3===2?f-2:f+1,l[f]!==t)return;if(f=s[f],f===-1){const c=i[(n[t]+1)%i.length];c!==d&&(yield c);return}}while(f!==o)}find(t,e,i=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const n=i;let s;for(;(s=this._step(i,t,e))>=0&&s!==i&&s!==n;)i=s;return s}_step(t,e,i){const{inedges:n,hull:s,_hullIndex:l,halfedges:r,triangles:o,points:f}=this;if(n[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,c=Y(e-f[t*2],2)+Y(i-f[t*2+1],2);const u=n[t];let a=u;do{let g=o[a];const _=Y(e-f[g*2],2)+Y(i-f[g*2+1],2);if(_<c&&(c=_,d=g),a=a%3===2?a-2:a+1,o[a]!==t)break;if(a=r[a],a===-1){if(a=s[(l[t]+1)%s.length],a!==g&&Y(e-f[a*2],2)+Y(i-f[a*2+1],2)<c)return a;break}}while(a!==u);return d}render(t){const e=t==null?t=new K:void 0,{points:i,halfedges:n,triangles:s}=this;for(let l=0,r=n.length;l<r;++l){const o=n[l];if(o<l)continue;const f=s[l]*2,d=s[o]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;const i=t==null?t=new K:void 0,{points:n}=this;for(let s=0,l=n.length;s<l;s+=2){const r=n[s],o=n[s+1];t.moveTo(r+e,o),t.arc(r,o,e,0,Tt)}return i&&i.value()}renderHull(t){const e=t==null?t=new K:void 0,{hull:i,points:n}=this,s=i[0]*2,l=i.length;t.moveTo(n[s],n[s+1]);for(let r=1;r<l;++r){const o=2*i[r];t.lineTo(n[o],n[o+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new tt;return this.renderHull(t),t.value()}renderTriangle(t,e){const i=e==null?e=new K:void 0,{points:n,triangles:s}=this,l=s[t*=3]*2,r=s[t+1]*2,o=s[t+2]*2;return e.moveTo(n[l],n[l+1]),e.lineTo(n[r],n[r+1]),e.lineTo(n[o],n[o+1]),e.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,i=t.length/3;e<i;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new tt;return this.renderTriangle(t,e),e.value()}}function jt(h,t,e,i){const n=h.length,s=new Float64Array(n*2);for(let l=0;l<n;++l){const r=h[l];s[l*2]=t.call(i,r,l,h),s[l*2+1]=e.call(i,r,l,h)}return s}function*Pt(h,t,e,i){let n=0;for(const s of h)yield t.call(i,s,n,h),yield e.call(i,s,n,h),++n}function B(h,t,e){this.k=h,this.x=t,this.y=e}B.prototype={constructor:B,scale:function(h){return h===1?this:new B(this.k*h,this.x,this.y)},translate:function(h,t){return h===0&t===0?this:new B(this.k,this.x+this.k*h,this.y+this.k*t)},apply:function(h){return[h[0]*this.k+this.x,h[1]*this.k+this.y]},applyX:function(h){return h*this.k+this.x},applyY:function(h){return h*this.k+this.y},invert:function(h){return[(h[0]-this.x)/this.k,(h[1]-this.y)/this.k]},invertX:function(h){return(h-this.x)/this.k},invertY:function(h){return(h-this.y)/this.k},rescaleX:function(h){return h.copy().domain(h.range().map(this.invertX,this).map(h.invert,h))},rescaleY:function(h){return h.copy().domain(h.range().map(this.invertY,this).map(h.invert,h))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};B.prototype;const ot=5e3,Lt=.5,Et=5,H=document.querySelector("#canvas"),Ft=document.createElement("video"),Ct=H.getContext("2d");Ct.imageSmoothingEnabled=!1;const J=h=>Math.floor(Math.random()*h),ht=(h,t,e,i)=>{const n=(e*i+t)*4;return .2126*h[n]+.7152*h[n+1]+.0722*h[n+2]},ct=h=>{const t=[];for(let e of h)t.push(e.x,e.y);return new et(t)},Ut=async(h,t)=>{const e=h.getContext("2d"),i=await navigator.mediaDevices.getUserMedia({video:{noiseSuppression:!0},audio:!1});t.srcObject=i,t.addEventListener("loadedmetadata",f=>{h.width=t.videoWidth,h.height=t.videoHeight,t.play(),t.requestVideoFrameCallback(o)});let n=null,s=null,l=[];e.fillStyle="red";let r=-1;const o=()=>{r++,e.save(),e.translate(t.videoWidth,0),e.scale(-1,1),e.drawImage(t,0,0,t.videoWidth,t.videoHeight),e.restore();const f=e.getImageData(0,0,h.width,h.height).data;if(r===0){for(let c=0;c<ot;c++){const u=J(h.width),a=J(h.height),g=ht(f,u,a,h.width);J(100)>g?l.push({x:u,y:a}):c--}n=ct(l),s=n.voronoi([0,0,h.width,h.height])}const d=Ot(f,n,s,l);n=d.delaunay,s=d.voronoi,l=d.points,e.clearRect(0,0,h.width,h.height);for(let[c,u]of l.entries())e.beginPath(),e.arc(u.x,u.y,d.weights[c]*Et,0,Math.PI*2),e.fill();t.requestVideoFrameCallback(o)}},Dt=(h,t,e)=>({x:h.x+(t.x-h.x)*e,y:h.y+(t.y-h.y)*e}),zt=(h,t,e)=>h.map((i,n)=>Dt(i,t[n],e)),Ot=(h,t,e,i)=>{const n=e.cellPolygons(),s=Array.from(n),l=new Array(ot),r=new Array(s.length).fill(0),o=new Array(s.length).fill(0),f=new Array(s.length).fill(0);for(let a=0;a<l.length;a++)l[a]={x:0,y:0};let d=0,c=0;for(let a=0;a<H.height;a++)for(let g=0;g<H.width;g++){const _=ht(h,g,a,H.width),p=Math.pow(1-_/255,2);d=t.find(g,a,d),l[d].x+=g*p,l[d].y+=a*p,r[d]+=p,o[d]++}for(let a=0;a<l.length;a++)if(r[a]>0){const{x:g,y:_}=l[a];l[a]={x:g/r[a],y:_/r[a]},f[a]=r[a]/(o[a]||1),f[a]>c&&(c=f[a])}else l[a]={...i[a]};const u=zt(i,l,Lt);return{delaunay:ct(i),voronoi:t.voronoi([0,0,H.width,H.height]),points:u,weights:f}};Ut(H,Ft);
